<!DOCTYPE HTML>
<html>
  <head>
    <script src="jquery-3.1.1.min.js"></script>
    <script src="retrieve_data.js"></script>
    <script src="sail_widget.js"></script>
    <script src="consts.js"></script>
    <link rel="stylesheet" href="main.css">
  </head>
  <body>
    <div class="boxed">
      <h4>Tacking Constants</h4>
      <table>
        <tr>  <td> Constant </td> <td> Current Value </td> <td> Set Value </td> </tr>
      <tr>
        <td> Close-hauled angle: </td>
        <td> <span class="data_output" field="tacker_consts.close_haul_angle"></span> </td>
        <td> <input type="textbox" class="data_input" field="close_haul_angle" msg="tacker_consts"> </td>
      </tr>
      <tr>
        <td> In-Irons Weight: </td>
        <td> <span class="data_output" field="tacker_consts.in_irons_cost"></span> </td>
        <td> <input type="textbox" class="data_input" field="in_irons_cost" msg="tacker_consts"> </td>
      </tr>
      <tr>
        <td> Near Goal Weight: </td>
        <td> <span class="data_output" field="tacker_consts.near_goal_cost"></span> </td>
        <td> <input type="textbox" class="data_input" field="near_goal_cost" msg="tacker_consts"> </td>
      </tr>
      <tr>
        <td> Hysteresis Weight: </td>
        <td> <span class="data_output" field="tacker_consts.hysteresis_cost"></span> </td>
        <td> <input type="textbox" class="data_input" field="hysteresis_cost" msg="tacker_consts"> </td>
      </tr>
      <tr>
        <td> Cost To Go Weight: </td>
        <td> <span class="data_output" field="tacker_consts.diff_yaw_cost"></span> </td>
        <td> <input type="textbox" class="data_input" field="diff_yaw_cost" msg="tacker_consts"> </td>
      </tr>
      <tr>
        <td> Momentum Weight: </td>
        <td> <span class="data_output" field="tacker_consts.momentum_cost"></span> </td>
        <td> <input type="textbox" class="data_input" field="momentum_cost" msg="tacker_consts"> </td>
      </tr>
      <tr>
        <td> Tacking Weight: </td>
        <td> <span class="data_output" field="tacker_consts.tacking_cost"></span> </td>
        <td> <input type="textbox" class="data_input" field="tacking_cost" msg="tacker_consts"> </td>
      </tr>
      </table>
      <input type="button" class="data_submit" msg="tacker_consts" value="Send Tacking Constants">
    </div>
    <div class="boxed">
      <h4>Controller Constants</h4>
      <table>
        <tr>  <td> Constant </td> <td> Current Value </td> <td> Set Value </td> </tr>
      <tr>
        <td> Max rudder angle: </td>
        <td> <span class="data_output" field="control_consts.max_rudder"></span> </td>
        <td> <input type="textbox" class="data_input" field="max_rudder" msg="control_consts"> </td>
      </tr>
      <tr>
        <td> Rudder Kp: </td>
        <td> <span class="data_output" field="control_consts.rudder_kp"></span> </td>
        <td> <input type="textbox" class="data_input" field="rudder_kp" msg="control_consts"> </td>
      </tr>
      <tr>
        <td> Rudder Ki: </td>
        <td> <span class="data_output" field="control_consts.rudder_ki"></span> </td>
        <td> <input type="textbox" class="data_input" field="rudder_ki" msg="control_consts"> </td>
      </tr>
      <tr>
        <td> Winch Kp: </td>
        <td> <span class="data_output" field="control_consts.winch_kp"></span> </td>
        <td> <input type="textbox" class="data_input" field="winch_kp" msg="control_consts"> </td>
      </tr>
      <tr>
        <td> Heel Comp Weight: </td>
        <td> <span class="data_output" field="control_consts.sail_heel_k"></span> </td>
        <td> <input type="textbox" class="data_input" field="sail_heel_k" msg="control_consts"> </td>
      </tr>
      <tr>
        <td> Ballast Arm Kp: </td>
        <td> <span class="data_output" field="control_consts.ballast_arm_kp"></span> </td>
        <td> <input type="textbox" class="data_input" field="ballast_arm_kp" msg="control_consts"> </td>
      </tr>
      <tr>
        <td> Ballast Arm Kd: </td>
        <td> <span class="data_output" field="control_consts.ballast_arm_kd"></span> </td>
        <td> <input type="textbox" class="data_input" field="ballast_arm_kd" msg="control_consts"> </td>
      </tr>
      <tr>
        <td> Ballast Arm FF (Arm): </td>
        <td> <span class="data_output" field="control_consts.ballast_arm_kff_arm"></span> </td>
        <td> <input type="textbox" class="data_input" field="ballast_arm_kff_arm" msg="control_consts"> </td>
      </tr>
      <tr>
        <td> Ballast Arm FF (Heel): </td>
        <td> <span class="data_output" field="control_consts.ballast_arm_kff_heel"></span> </td>
        <td> <input type="textbox" class="data_input" field="ballast_arm_kff_heel" msg="control_consts"> </td>
      </tr>
      <tr>
        <td> Ballast Heel Kp: </td>
        <td> <span class="data_output" field="control_consts.ballast_heel_kp"></span> </td>
        <td> <input type="textbox" class="data_input" field="ballast_heel_kp" msg="control_consts"> </td>
      </tr>
      <tr>
        <td> Ballast Heel Ki: </td>
        <td> <span class="data_output" field="control_consts.ballast_heel_ki"></span> </td>
        <td> <input type="textbox" class="data_input" field="ballast_heel_ki" msg="control_consts"> </td>
      </tr>
      <tr>
        <td> Ballast Heel Kd: </td>
        <td> <span class="data_output" field="control_consts.ballast_heel_kd"></span> </td>
        <td> <input type="textbox" class="data_input" field="ballast_heel_kd" msg="control_consts"> </td>
      </tr>
      <tr>
        <td> Ballast Heel Kff: </td>
        <td> <span class="data_output" field="control_consts.ballast_heel_kff_goal"></span> </td>
        <td> <input type="textbox" class="data_input" field="ballast_heel_kff_goal" msg="control_consts"> </td>
      </tr>
      <tr>
        <td> Nominal Heel: </td>
        <td> <span class="data_output" field="control_consts.nominal_heel"></span> </td>
        <td> <input type="textbox" class="data_input" field="nominal_heel" msg="control_consts"> </td>
      </tr>
      <tr>
        <td> Rigid Port Servo: </td>
        <td> <span class="data_output" field="control_consts.rigid_port_servo_pos"></span> </td>
        <td> <input type="textbox" class="data_input" field="rigid_port_servo_pos" msg="control_consts"> </td>
      </tr>
      <tr>
        <td> Rigid S'brd Servo: </td>
        <td> <span class="data_output" field="control_consts.rigid_starboard_servo_pos"></span> </td>
        <td> <input type="textbox" class="data_input" field="rigid_starboard_servo_pos" msg="control_consts"> </td>
      </tr>
      <tr>
        <td> Q_f: </td>
        <td> <span class="data_output" field="control_consts.qf"></span> </td>
        <td> <input type="textbox" class="data_input" field="qf" msg="control_consts"> </td>
      </tr>
      </table>
      <input type="button" class="data_submit" msg="control_consts" value="Send Controller Constants">
    </div>
    <div class="boxed">
      <h4>Zeroing Constants</h4>
      <table>
        <tr>  <td> Constant </td> <td> Current Value </td> <td> Set Value </td> </tr>
      <tr>
        <td> Rudder value at zero (0-180): </td>
        <td> <span class="data_output" field="zeroing_consts.rudder_zero"></span> </td>
        <td> <input type="textbox" id="zeroing_consts-rudder_zero"> </td>
      </tr>
      <tr>
        <td> Ballast zeroing angle: </td>
        <td> <span class="data_output" field="zeroing_consts.ballast_zero"></span> </td>
        <td> <input type="textbox" id="zeroing_consts-ballast_zero"> </td>
      </tr>
      <tr>
        <td> Winch Pot value at 0 deg </td>
        <td> <span class="data_output" field="zeroing_consts.winch_0_pot"></span> </td>
        <td> <input type="textbox" id="zeroing_consts-winch_0_pot"> </td>
      </tr>
      <tr>
        <td> Winch Pot value at 90 deg </td>
        <td> <span class="data_output" field="zeroing_consts.winch_90_pot"></span> </td>
        <td> <input type="textbox" id="zeroing_consts-winch_90_pot"> </td>
      </tr>
      <tr>
        <td> Winch Full Out Angle </td>
        <td> <span class="data_output" field="zeroing_consts.winch_out_angle"></span> </td>
        <td> <input type="textbox" id="zeroing_consts-winch_out_angle"> </td>
      </tr>
      </table>
      <input type="button" onclick="checkAndSendZeros();" value="Send Zeroing Constants">
      <input type="button" onclick='sendMessage("zeroing_consts", {write_constants: true});' value="Save Constants">
    </div>
  </body>
  </body>
</html>
