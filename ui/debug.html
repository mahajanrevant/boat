<!DOCTYPE HTML>
<html>
  <head>
    <script src="jquery-3.1.1.min.js"></script>
    <script src="retrieve_data.js"></script>
    <script src="sail_widget.js"></script>
  </head>
  <body>
    <table>
      <tr>
        <td>Sail: <span class="data_output" field="boat_state.internal.sail" op="toDeg" /> </td>
        <td>Rudder: <span class="data_output" field="boat_state.internal.rudder" /> </td>
        <td>Ballast: <span class="data_output" field="boat_state.internal.ballast" /> </td>
      </tr>
      <tr>
        <td>X Position: <span class="data_output" field="boat_state.pos.x" /> </td>
        <td>Position: <span class="data_output" field="boat_state.pos" /> </td>
        <td>True Vel: <span class="data_output" field="sim_true_boat_state.vel" /> </td>
        <td>Known Vel: <span class="data_output" field="boat_state.vel" /> </td>
      </tr>
      <tr>
        <td>Sim Wind: <span class="data_output" field="sim_set_wind" /> </td>
        <td>True Wind: <span class="data_output" field="true_wind" /> </td>
        <td>Known Wind: <span class="data_output" field="wind" /> </td>
      </tr>
      <tr>
        <td>Ping: <span class="data_output" field="ping" /> </td>
        <td>Time: <span class="data_output" field="time" /> </td>
      </tr>
      <tr>
        <td>Rigid Wing Feedback: <span class="data_output" field="rigid_wing_feedback" /> </td>
      </tr>
      <tr>
        <td>Rigid Wing Cmd: <span class="data_output" field="rigid_wing_cmd" /> </td>
      </tr>
      <tr>
        <td> Sail Cmd: <span class="data_output" field="sail_cmd" /> </td>
        <td> Manual Sail Cmd: <span class="data_output" field="manual_sail_cmd" /> </td>
        <td> Rudder Cmd: <span class="data_output" field="rudder_cmd" /> </td>
        <td> Heading Cmd: <span class="data_output" field="heading_cmd" /> </td>
        <td> Ballast Cmd: <span class="data_output" field="ballast_cmd" /> </td>
        <td> Manual Ballast Cmd: <span class="data_output" field="manual_ballast_cmd" /> </td>
        <td> Manual Rudder Cmd: <span class="data_output" field="manual_rudder_cmd" /> </td>
      </tr>
    </table>
    <div>
      Rigid Wing Send:
      State: <input type="textbox" class="data_input" field="state" msg="rigid_wing_cmd" value="7">
      Heel: <input type="textbox" class="data_input" field="heel" msg="rigid_wing_cmd" value="0">
      Max Heel: <input type="textbox" class="data_input" field="max_heel" msg="rigid_wing_cmd" value="1">
      Servo Pos: <input type="textbox" class="data_input" field="servo_pos" msg="rigid_wing_cmd" value="50">
      <input type="button" class="data_submit" msg="rigid_wing_cmd" value="Submit">
    </div>
    <div>
      Heading Send:
      <input type="textbox" class="data_input" field="heading" msg="heading_cmd" value="0">
      <input type="button" class="data_submit" msg="heading_cmd" value="Send Heading">
      Sail Voltage:
      <input type="textbox" class="data_input" field="voltage" msg="manual_sail_cmd" value="0">
      <input type="button" class="data_submit" msg="manual_sail_cmd" value="Send Sail">
      Rudder Position:
      <input type="textbox" class="data_input" field="pos" msg="manual_rudder_cmd" value="0">
      <input type="button" class="data_submit" msg="manual_rudder_cmd" value="Send Rudder">
    </div>
    <div>
        Mode: <span class="data_output" field="control_mode" />
    </div>
    <div>
      Manual Control Send (0=rc,1=auto,2=wifi,3=disable) (winch, rudder, rigid):
      <input type="textbox" class="data_input" field="winch_mode" msg="control_mode" value="3">
      <input type="textbox" class="data_input" field="rudder_mode" msg="control_mode" value="3">
      <input type="textbox" class="data_input" field="rigid_mode" msg="control_mode" value="3">
      <input type="button" class="data_submit" msg="control_mode" value="Send Mode">
    </div>
    <div>
      <span class="data_output" field="can126992"></span> <br>
      <span class="data_output" field="can127250"></span> <br>
      <span class="data_output" field="can127251"></span> <br>
      <span class="data_output" field="can127257"></span> <br>
      <span class="data_output" field="can129025"></span> <br>
      <span class="data_output" field="can129026"></span> <br>
      <span class="data_output" field="can129029"></span> <br>
      <span class="data_output" field="can129033"></span> <br>
      <span class="data_output" field="can129539"></span> <br>
      <span class="data_output" field="can130306"></span> <br>
      <span class="data_output" field="can65281"></span> <br>
      <span class="data_output" field="can65282"></span> <br>
      <span class="data_output" field="can65283"></span> <br>
      <span class="data_output" field="can65285"></span> <br>
      <span class="data_output" field="can65296"></span> <br>
      <span class="data_output" field="can65297"></span> <br>
      <span class="data_output" field="can65312"></span> <br>
      <span class="data_output" field="sbus_value"></span> <br>
      <span class="data_output" field="connection_status"></span> <br>
    </div>
    <div>
      Boat State: <span class="data_output" field="boat_state" /> </td>
    </div>
    <div>
      Logged State: <span class="data_output" field="orig_boat_state" /> </td>
    </div>
    <div>
      Vision Data: <span class="data_output" field="vision_data" /> </td>
    </div>
    <div>
      Tacker State: <span class="data_output" field="tacker_state" /> </td>
    </div>
    <div>
      Waypoints: <span class="data_output" field="waypoints"></span> </td>
      Send Waypoints: <input type="textbox" id="wp_many"> </td>
    <input type="button" onclick='sendMessage("waypoints", JSON.parse($("#wp_many").val()));' value="Send Waypoints">
    </div>
    <div>
      Obstacles: <span class="data_output" field="planner_obstacles"></span> </td>
      Send Obstacles: <input type="textbox" id="plan_obs"> </td>
    <input type="button" onclick='sendMessage("planner_obstacles", {polygons: JSON.parse($("#plan_obs").val())});' value="Send Obstacles">
    </div>
    <div>
      Ping: <input type="textbox" class="data_input" field="a" msg="ping" value="0.0">
      <input type="button" class="data_submit" msg="ping" value="Ping!">
    </div>
  </body>
</html>
